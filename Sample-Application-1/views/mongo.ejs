

<!-- 1. Add Person to Collection -->
<div id="1" class="menu-div" style="display:none">
    <form method="POST" action="/person" >

        <span style="color: rgb(21, 21, 21);">Add a person to DB collection</span><hr style="border-top: 1px solid rgb(21, 21, 21);"><br>

            <label>Full Name:</label>
            <input type="text" name="firstname" id ="firstname" class="field-divided" placeholder="First Name" size=10  required/>
            <input type="text" name="surname" id="surname" class="field-divided" placeholder="Surname"  required/><br>
            <label>Telephone:</label>

            <input type="number" name="telephone" id ="telephone" class="field-small" placeholder="Telephone" size=50 required><br><br>
            <input style="background: rgb(238, 0, 0);" type="submit" value="Create Person" />
    </form>

    <label >Response:</label>
    <textarea name="response" id ="response"  readonly><%- JSON.stringify(ui.data[1],null,3) %></textarea>
</div>


<!-- 2. Get Persons -->
<div id="2" class="menu-div" style="display:none">
    <form method="GET" action="/person" >
        <span style="color: rgb(21, 21, 21);">List persons</span><hr style="border-top: 1px solid rgb(21, 21, 21);"><br>
        <input type="submit" style="background: rgb(238, 0, 0);" value="List Persons" />
    </form>

    <br>
    <label>People:</label>
<textarea readonly>
<% if ( typeof ui.data[2] == 'object' && ui.data[2] ) { %><%for (var i in ui.data[2].data){ %><%= i %>: 
Mongo ID:<%= ui.data[2].data[i]._id %>
Name: <%= ui.data[2].data[i].firstname %> <%= ui.data[2].data[i].surname %> 
Phone: <%= ui.data[2].data[i].telephone %>


<%}%>
<%}%>
</textarea>
    <br>
    <label >Response:</label>
    <textarea name="response" id ="response"  readonly><%- JSON.stringify(ui.data[2],null,3) %></textarea>
</div>

<!-- 3. Update Persons -->
<div id="3" class="menu-div" style="display:none">
    <form method="POST" action="/person/update">
        <span style="color: rgb(21, 21, 21);">Update person </span><hr style="border-top: 1px solid rgb(21, 21, 21);"><br>
        

            <label>Mongo ID:</label>
            <input type="text" name ="mongoid" id ="mongoid"  placeholder="Mongo ID" required> <br>

            <label>Full Name:</label>
            <input type="text" name="firstname" id ="firstname" placeholder="First Name"  size=35 required/>
            <input type="text" name="surname" id="surname" placeholder="Surname" size=35 required/>


            <label>Telephone:</label>

            <input type="number" name="telephone" id ="telephone" class="field-small" placeholder="Telephone" size=50 required><br><br>
            <input style="background: rgb(238, 0, 0);" type="submit" value="Update Person" />
    </form>
    <br>
    <label >Response:</label>
    <textarea name="response" id ="response"  readonly><%- JSON.stringify(ui.data[3],null,3) %></textarea>
</div>

<!-- 4. Delete Persons -->
<div id="4" class="menu-div" style="display:none">
    <form method="POST" action="/person/delete" >    
        <span style="color: rgb(21, 21, 21);">Delete person</span><hr style="border-top: 1px solid rgb(21, 21, 21);"><br>
        <label>Mongo ID:</label>
        <input placeholder ="Mongo ID" id ="mongoid" type="text" name ="mongoid" size=50 required><br><br>
        <input style="background: rgb(238, 0, 0);" type="submit" value="Delete Persons" />
        <br>
    </form>
    <br>
    <% if ( typeof ui.data[4] != 'object' ) { %>
    <textarea name="response" id ="response" style="color: red;" readonly>
    Please make sure that you have made the following changes before trying out DELETE function:
     1. Click on the exit Button to close the program
     2. Go to the personController.js file under controllers
     3. Follow the steps on Line 151
        OR
     3. Delete the code from Line 153 to 156
     4. Paste the following code below that:
        'Person.findByIdAndRemove(req.body.mongoid, function (err, person) {

            
        if (err) {
            ui.data[ui.menuitem].status = '500'
            ui.data[ui.menuitem].data = err
        } else {
            if (person == null) {
                ui.data[ui.menuitem].status = '404'
                ui.data[ui.menuitem].data = 'person id ' + req.body.mongoid + ' not found'
            } else {
                ui.data[ui.menuitem].status = '200'
                ui.data[ui.menuitem].data = person
            }
        }

        ui.data[ui.menuitem].action = 'delete'
        res.render('./index.ejs', {
            ui: ui
        })
    })'
    </textarea>
    <%} else {%>
    <label>Response:</label>
    <textarea name="response" id ="response"  readonly>
        <%- JSON.stringify(ui.data[4],null,3) %>
    </textarea>
    <%}%>
    
</div>

